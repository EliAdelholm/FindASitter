<mat-card class="conversation">
	<mat-card-content #content *ngIf="messages" >

		<div #chatMessages class="message" *ngFor="let message of messages; let last = last" [ngClass]="(message.userId == auth.id) ? 'receiver' : 'sender'">
			<div class="header" *ngIf="isFirst(message.id, message.userId)">
				<div class="profile-img" [style.background]="'url(../../assets/img/' + message.image + ')'"></div>
				<h4>{{ message.username }}</h4>
			</div>
			<div class="body">
				<p>{{ message.text }}</p>
			</div>
			<div class="clear"></div>
			{{last ? scrollToBottom() : ''}}
		</div>

	</mat-card-content>

	<div id="write-message">
		<mat-form-field>
			<textarea matInput placeholder="Type a Message" [(ngModel)]="newMessage"></textarea>
		</mat-form-field>
		<button mat-fab color="primary" (click)="sendMessage()">
			<mat-icon>send</mat-icon>
		</button>
	</div>
</mat-card>